# 2018-12-27

모달 창 영역을 제외한 곳을 클릭했을 때 닫히게 하기 

[참고한 자료](https://codepen.io/graubnla/pen/EgdgZm?editors=0010)

모달을 감싸고있는 영역을 ref로 지정해주어서 그 외의 곳을 클릭할 때 모달이 닫히게 한다. 이 때 모달의 상태에 따라 `document.addEventListener`를 추가, 제거하여서 모달이 열려있을 때에는 이벤트를 제거시키고, 모달이 닫혀있을 때에는 이벤트를 활성화시키는 로직을 `handleInfoClick()`에 지정해준다. 그리고 `handleOutisdeClick`을 작성하여 이벤트리스너를 `handleInfoClick` 내에서 선언할 때 탈부착되는 이벤트로 지정한다.

```js
handleInfoClick() {
    if (!this.state.infoShow) {
      document.addEventListener('click', this.handleOutsideClick, false);
    } else {
      document.removeEventListener('click', this.handleOutsideClick, false);
    }
    this.setState(prevState => ({
      infoShow: !prevState.infoShow,
    }));
  }

  handleOutsideClick(e) {
    if (this.node.contains(e.target)) {
      return;
    }
    this.handleInfoClick();
  }
```